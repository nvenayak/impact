<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Quickstart &mdash; impact 0.8.0 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootswatch-3.3.6/simplex/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.8.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.3/require.min.js"></script>
    <link rel="top" title="impact 0.8.0 documentation" href="index.html" />
    <link rel="next" title="Core structure" href="core_structure.html" />
    <link rel="prev" title="Impact: a framework for analyzing microbial physiology" href="readme.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          impact</a>
        <span class="navbar-text navbar-version pull-left"><b>0.8</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="/">Home</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">impact <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme.html">Impact: a framework for analyzing microbial physiology</a><ul>
<li class="toctree-l2"><a class="reference internal" href="readme.html#quick-start-guide">Quick Start Guide</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Importing-data">Importing data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#Querying-and-filtering-for-data">Querying and filtering for data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Visualization">Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Exploring-features">Exploring features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="core_structure.html">Core structure</a><ul>
<li class="toctree-l2"><a class="reference internal" href="core_structure.html#TrialIdentifier-class"><code class="docutils literal"><span class="pre">TrialIdentifier</span></code> class</a></li>
<li class="toctree-l2"><a class="reference internal" href="core_structure.html#AnalyteData"><code class="docutils literal"><span class="pre">AnalyteData</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="core_structure.html#SingleTrial"><code class="docutils literal"><span class="pre">SingleTrial</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="core_structure.html#ReplicateTrial"><code class="docutils literal"><span class="pre">ReplicateTrial</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="core_structure.html#Experiment"><code class="docutils literal"><span class="pre">Experiment</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="core_structure.html#Project"><code class="docutils literal"><span class="pre">Project</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="1_features_0.html">Analyzing Features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="1_features_0.html#Rates">Rates</a></li>
<li class="toctree-l2"><a class="reference internal" href="1_features_0.html#Specific-Productivity">Specific Productivity</a></li>
<li class="toctree-l2"><a class="reference internal" href="1_features_0.html#Metabolic-Model-Integration">Metabolic Model Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="1_features_0.html#dFBA-Batch-Integration">dFBA Batch Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="1_features_0.html#Carbon-Balance">Carbon Balance</a></li>
<li class="toctree-l2"><a class="reference internal" href="1_features_0.html#Flux-mapping-with-escher">Flux mapping with escher</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="2_features_1.html">Stages</a></li>
<li class="toctree-l1"><a class="reference internal" href="impact.html">impact package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="impact.html#subpackages">Subpackages</a></li>
<li class="toctree-l2"><a class="reference internal" href="impact.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="impact.html#module-impact">Module contents</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">This page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Quickstart</a><ul>
<li><a class="reference internal" href="#Importing-data">Importing data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Querying-and-filtering-for-data">Querying and filtering for data</a><ul>
<li><a class="reference internal" href="#Visualization">Visualization</a></li>
<li><a class="reference internal" href="#Exploring-features">Exploring features</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="readme.html" title="Previous Chapter: Impact: a framework for analyzing microbial physiology"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Impact: a fra...</span>
    </a>
  </li>
  <li>
    <a href="core_structure.html" title="Next Chapter: Core structure"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Core structure &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/quickstart.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput > div,
div.nbinput div[class^=highlight],
div.nbinput div[class^=highlight] pre,
div.nboutput,
div.nboutput > div,
div.nboutput div[class^=highlight],
div.nboutput div[class^=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class^=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput > :first-child pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput > :first-child pre {
    color: #D84315;
}

/* all prompts */
div.nbinput > :first-child[class^=highlight],
div.nboutput > :first-child[class^=highlight],
div.nboutput > :first-child {
    min-width: 9ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}

/* input/output area */
div.nbinput > :nth-child(2)[class^=highlight],
div.nboutput > :nth-child(2),
div.nboutput > :nth-child(2)[class^=highlight] {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}

/* input area */
div.nbinput > :nth-child(2)[class^=highlight] {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput  > :nth-child(2).stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-bold { font-weight: bold; }
</style>
<div class="section" id="Quickstart">
<h1>Quickstart<a class="headerlink" href="#Quickstart" title="Permalink to this headline">¶</a></h1>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [1]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">impact</span> <span class="kn">as</span> <span class="nn">impt</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="stderr container">
<div class="highlight"><pre>
C:\Users\Naveen\Anaconda3\lib\site-packages\IPython\html.py:14: ShimWarning: The `IPython.html` package has been deprecated. You should import from `notebook` instead. `IPython.html.widgets` has moved to `ipywidgets`.
  &#34;`IPython.html.widgets` has moved to `ipywidgets`.&#34;, ShimWarning)
</pre></div></div>
</div>
<p>The impact framework is designed to help scientists parse, interpret,
explore and visualize data to understand and engineer micorbial
physiology. The core framework is open-source and written entirely in
python.</p>
<p>Data is parsed into an object-oriented data structure, built on top of a
relational mapping to most sql databases. This allows for efficient
saving and querying to ease data exploration.</p>
<p>Here we provide the basics to get started analyzing data with the core
framework. Before getting started, it is worthwhile to understand the
basic data schema:</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Model</th>
<th class="head">Function</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>TrialIdentifier</td>
<td>Describes a trial (time, analyte, strain, media, etc.)</td>
</tr>
<tr class="row-odd"><td>AnalyteData</td>
<td>Time, data points and vectors for quantified data (g/L
product, OD, etc.)</td>
</tr>
<tr class="row-even"><td>SingleTrial</td>
<td>All analytes for a given unit (e.g. a tube, well on
plate, bioreactor, etc.)</td>
</tr>
<tr class="row-odd"><td>ReplicateTrial</td>
<td>Contains a set of <code class="docutils literal"><span class="pre">SingleTrial</span></code>s with replicates
grouped to calculate statistics</td>
</tr>
<tr class="row-even"><td>Experiment</td>
<td>All of the trials performed on a given date</td>
</tr>
<tr class="row-odd"><td>Project</td>
<td>Groups of experiments with overall goals</td>
</tr>
</tbody>
</table>
<p>On import, data will automatically be parsed into this format. In
addition, data will most commonly be queried by metadata in the
<code class="docutils literal"><span class="pre">TrialIdentifier</span></code> which is composed of three main identifiers:</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Model</th>
<th class="head">Function</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Strain</td>
<td>Describes the organism being characterized (e.g. strain,
knockouts, plasmids, etc.)</td>
</tr>
<tr class="row-odd"><td>Media</td>
<td>Described the medium used to characterize the organism
(e.g. M9 + 0.02% glc_D)</td>
</tr>
<tr class="row-even"><td>Environment</td>
<td>The conditions and labware used (e.g. 96-well plate,
250RPM, 37C)</td>
</tr>
</tbody>
</table>
<div class="section" id="Importing-data">
<h2>Importing data<a class="headerlink" href="#Importing-data" title="Permalink to this headline">¶</a></h2>
<p>Data is imported using the <code class="docutils literal"><span class="pre">parse_raw_data</span></code> function from the
<code class="docutils literal"><span class="pre">.parsing</span></code> module. This function returns an <code class="docutils literal"><span class="pre">Experiment</span></code>, which is
the result of organizing all of your data.</p>
<p>To parse data, the data is usually provided in an xlsx file in one of
the desired formats. If your data doesn&#8217;t conform to one of the built-in
formats, you can use the provided parsers as a cookbook to build your
own. Generally, minor edits are required to conform to new data.</p>
<p>Here we use the sample test data, which is a typical format for data
from HPLC. Each row is a specific trial and time points, and the columns
represent the different analytes, and their types. You can see this data
in <code class="docutils literal"><span class="pre">tests/test_data/sample_input_data.xlsx</span></code></p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [2]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">impact.parsers</span> <span class="kn">import</span> <span class="n">parse_raw_data</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="n">expt</span> <span class="o">=</span> <span class="n">parse_raw_data</span><span class="p">(</span><span class="s1">&#39;default_titers&#39;</span><span class="p">,</span><span class="n">file_name</span> <span class="o">=</span> <span class="s1">&#39;../tests/test_data/sample_input_data.xlsx&#39;</span><span class="p">)</span>
<span class="n">expt</span><span class="o">.</span><span class="n">calculate</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<div class="highlight"><pre>

Importing data from ../tests/test_data/sample_input_data.xlsx...0.1s
Parsed 2884 timeCourseObjects in 0.528s...Number of lines skipped:  0
Parsing time point list...Parsed 2884 time points in 2.7s
Parsing analyte list...Parsed 18 analytes in 633.9ms
Parsing single trial list...Parsed 18 replicates in 0.0s
Analyzing data...
</pre></div></div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="stderr container">
<div class="highlight"><pre>
c:\users\naveen\documents\university\grad school\university of toronto\research\python\impact\impact\impact\core\features.py:42: RuntimeWarning: invalid value encountered in true_divide
  self.substrate_consumed
c:\users\naveen\documents\university\grad school\university of toronto\research\python\impact\impact\impact\core\features.py:42: RuntimeWarning: divide by zero encountered in true_divide
  self.substrate_consumed
</pre></div></div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<div class="highlight"><pre>
Ran analysis in 1.1s

</pre></div></div>
</div>
<p>The data is now imported and organized, we can quickly get an overview
of what we&#8217;ve imported.</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [3]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="k">print</span><span class="p">(</span><span class="n">expt</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<div class="highlight"><pre>
strain    media    environment    analytes
--------  -------  -------------  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
strain1            None           [&#39;ethanol&#39;, &#39;glucose&#39;, &#39;1,3-butanediol&#39;, &#39;lactate&#39;, &#39;succinate&#39;, &#39;pyruvate&#39;, &#39;formate&#39;, &#39;R/S-2,3-butanediol&#39;, &#39;acetate&#39;, &#39;3-hydroxybutyrate&#39;, &#39;acetoin&#39;, &#39;meso-2,3-butanediol&#39;, &#39;acetaldehyde&#39;, &#39;OD600&#39;]
strain2            None           [&#39;ethanol&#39;, &#39;glucose&#39;, &#39;1,3-butanediol&#39;, &#39;lactate&#39;, &#39;succinate&#39;, &#39;pyruvate&#39;, &#39;formate&#39;, &#39;R/S-2,3-butanediol&#39;, &#39;acetate&#39;, &#39;3-hydroxybutyrate&#39;, &#39;acetoin&#39;, &#39;meso-2,3-butanediol&#39;, &#39;acetaldehyde&#39;, &#39;OD600&#39;]
strain2            None           [&#39;1,3-butanediol&#39;, &#39;glucose&#39;, &#39;ethanol&#39;, &#39;lactate&#39;, &#39;succinate&#39;, &#39;pyruvate&#39;, &#39;formate&#39;, &#39;R/S-2,3-butanediol&#39;, &#39;acetate&#39;, &#39;3-hydroxybutyrate&#39;, &#39;acetoin&#39;, &#39;meso-2,3-butanediol&#39;, &#39;acetaldehyde&#39;, &#39;OD600&#39;]
strain3            None           [&#39;1,3-butanediol&#39;, &#39;glucose&#39;, &#39;ethanol&#39;, &#39;lactate&#39;, &#39;succinate&#39;, &#39;pyruvate&#39;, &#39;formate&#39;, &#39;R/S-2,3-butanediol&#39;, &#39;acetate&#39;, &#39;3-hydroxybutyrate&#39;, &#39;acetoin&#39;, &#39;meso-2,3-butanediol&#39;, &#39;acetaldehyde&#39;, &#39;OD600&#39;]
strain3            None           [&#39;1,3-butanediol&#39;, &#39;glucose&#39;, &#39;ethanol&#39;, &#39;lactate&#39;, &#39;succinate&#39;, &#39;pyruvate&#39;, &#39;formate&#39;, &#39;R/S-2,3-butanediol&#39;, &#39;acetate&#39;, &#39;3-hydroxybutyrate&#39;, &#39;acetoin&#39;, &#39;meso-2,3-butanediol&#39;, &#39;acetaldehyde&#39;, &#39;OD600&#39;]
strain4            None           [&#39;glucose&#39;, &#39;1,3-butanediol&#39;, &#39;ethanol&#39;, &#39;lactate&#39;, &#39;succinate&#39;, &#39;pyruvate&#39;, &#39;formate&#39;, &#39;R/S-2,3-butanediol&#39;, &#39;acetate&#39;, &#39;3-hydroxybutyrate&#39;, &#39;acetoin&#39;, &#39;meso-2,3-butanediol&#39;, &#39;acetaldehyde&#39;, &#39;OD600&#39;]
strain4            None           [&#39;1,3-butanediol&#39;, &#39;glucose&#39;, &#39;ethanol&#39;, &#39;lactate&#39;, &#39;succinate&#39;, &#39;pyruvate&#39;, &#39;formate&#39;, &#39;R/S-2,3-butanediol&#39;, &#39;acetate&#39;, &#39;3-hydroxybutyrate&#39;, &#39;acetoin&#39;, &#39;meso-2,3-butanediol&#39;, &#39;acetaldehyde&#39;, &#39;OD600&#39;]
</pre></div></div>
</div>
<p>Before we dive into data analysis, it is worth having a basic
understanding of the schema to know where to look for data.</p>
<p>Firstly, all data is funneled into a <code class="docutils literal"><span class="pre">ReplicateTrial</span></code>, even if you
only have one replicate. As such, it is convenient to always look for
data in this object. This object contains both an <code class="docutils literal"><span class="pre">avg</span></code> and <code class="docutils literal"><span class="pre">std</span></code>
attribute where you can find the respective statistics. <code class="docutils literal"><span class="pre">avg</span></code> and
<code class="docutils literal"><span class="pre">std</span></code> attributes are instances of <code class="docutils literal"><span class="pre">SingleTrial</span></code>, so we can access
the statistical data similarly to the raw data itself.</p>
</div>
</div>
<div class="section" id="Querying-and-filtering-for-data">
<h1>Querying and filtering for data<a class="headerlink" href="#Querying-and-filtering-for-data" title="Permalink to this headline">¶</a></h1>
<p>After import, data is all sorted into python objects, associated to an
sql database using an object-relational mapper, SQLalchemy. Usually,
we&#8217;re interested in comparing a set of features and a set of conditions
(strain, media, environment) and the queryable database allows us to
search for the data we are interested in.</p>
<p>Although it is usually simple to use the ORM to access the database
directly, basic querying can also be done using python list
comprehensions. The major limitation is that you will only query
experiments loaded in memory, e.g. experiments that were parsed into
this notebook.</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [4]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;All&#39;</span><span class="p">)</span>
<span class="n">reps</span> <span class="o">=</span> <span class="p">[</span><span class="n">rep</span> <span class="k">for</span> <span class="n">rep</span> <span class="ow">in</span> <span class="n">expt</span><span class="o">.</span><span class="n">replicate_trials</span><span class="p">]</span>
<span class="k">for</span> <span class="n">rep</span> <span class="ow">in</span> <span class="n">reps</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">rep</span><span class="o">.</span><span class="n">trial_identifier</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Filtered&#39;</span><span class="p">)</span>
<span class="n">reps</span> <span class="o">=</span> <span class="p">[</span><span class="n">rep</span> <span class="k">for</span> <span class="n">rep</span> <span class="ow">in</span> <span class="n">expt</span><span class="o">.</span><span class="n">replicate_trials</span>
       <span class="k">if</span> <span class="n">rep</span><span class="o">.</span><span class="n">trial_identifier</span><span class="o">.</span><span class="n">strain</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;strain1&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">rep</span> <span class="ow">in</span> <span class="n">reps</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">rep</span><span class="o">.</span><span class="n">trial_identifier</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<div class="highlight"><pre>
All
strain: strain1,        media: ,        env: None
strain: strain2,        media: ,        env: None
strain: strain3,        media: ,        env: None
strain: strain4,        media: ,        env: None
strain: strain3,        media: ,        env: None
strain: strain4,        media: ,        env: None
strain: strain2,        media: ,        env: None
Filtered
strain: strain1,        media: ,        env: None
</pre></div></div>
</div>
<p>To use the database, we must query data through a <code class="docutils literal"><span class="pre">session</span></code> object.
The session is open for the entire application.</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [10]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">impact.database</span> <span class="kn">import</span> <span class="n">session</span><span class="p">,</span> <span class="n">create_db</span>
<span class="n">create_db</span><span class="p">()</span>
<span class="n">session</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>Out[10]:
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre>
<span></span>&lt;sqlalchemy.orm.session.Session at 0x24ed289cb70&gt;
</pre></div>
</div>
</div>
<p>Now that we have a session, we can use the standard SQLalchemy ORM
language to query - it is described in detail here
<a class="reference external" href="http://docs.sqlalchemy.org/en/latest/orm/tutorial.html#querying">http://docs.sqlalchemy.org/en/latest/orm/tutorial.html#querying</a></p>
<div class="nbinput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [12]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">expt</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [15]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">reps</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">impt</span><span class="o">.</span><span class="n">ReplicateTrial</span><span class="p">)</span>\
                <span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">impt</span><span class="o">.</span><span class="n">ReplicateTrialIdentifier</span><span class="p">)</span>\
                <span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">impt</span><span class="o">.</span><span class="n">Strain</span><span class="p">)</span>\
                <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">impt</span><span class="o">.</span><span class="n">Strain</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;strain1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

<span class="k">for</span> <span class="n">rep</span> <span class="ow">in</span> <span class="n">reps</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">rep</span><span class="o">.</span><span class="n">trial_identifier</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<div class="highlight"><pre>
strain: strain1,        media: ,        env: None
</pre></div></div>
</div>
<div class="section" id="Visualization">
<h2>Visualization<a class="headerlink" href="#Visualization" title="Permalink to this headline">¶</a></h2>
<p>Several packages already exist for visualization in python. The most
popular one in matplotlib, it has very simple syntax which should feel
familiar for matlab users; however, matplotlib generates static plots.
The Impact visualization module is built around plotly, and as such it
is worthwhile understanding the basic syntax of plotly charts.</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [23]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">impact.plotting</span> <span class="kn">as</span> <span class="nn">implot</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="c1"># Charts are made up in a hierarchical structure, but can be quickly generated as follows:</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
<span class="n">implot</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">implot</span><span class="o">.</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">),</span>
             <span class="n">implot</span><span class="o">.</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="o">*</span><span class="mi">2</span><span class="p">)])</span>

<span class="c1"># For more control over these plots, they can be built form the ground up</span>
<span class="c1"># Traces are defined for each feature</span>
<span class="n">traces</span> <span class="o">=</span> <span class="p">[</span><span class="n">implot</span><span class="o">.</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">),</span>
             <span class="n">implot</span><span class="o">.</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="o">*</span><span class="mi">2</span><span class="p">)]</span>

<span class="n">layout</span> <span class="o">=</span> <span class="n">implot</span><span class="o">.</span><span class="n">go</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>

<span class="c1"># Traces are joined to a figure</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">implot</span><span class="o">.</span><span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">traces</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>

<span class="c1"># And a figure is printed using plot</span>
<span class="n">implot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput container">
<div class="container">
</div>
<div class="container">
<div id="b3c87cd8-2799-4c18-8ebc-532c49d142ff" style="height: 525px; width: 100%;" class="plotly-graph-div"></div><script type="text/javascript">require(["plotly"], function(Plotly) { window.PLOTLYENV=window.PLOTLYENV || {};window.PLOTLYENV.BASE_URL="https://plot.ly";Plotly.newPlot("b3c87cd8-2799-4c18-8ebc-532c49d142ff", [{"x": [0.0, 1.1111111111111112, 2.2222222222222223, 3.3333333333333335, 4.444444444444445, 5.555555555555555, 6.666666666666667, 7.777777777777779, 8.88888888888889, 10.0], "y": [0.0, 1.234567901234568, 4.938271604938272, 11.111111111111112, 19.75308641975309, 30.864197530864196, 44.44444444444445, 60.49382716049384, 79.01234567901236, 100.0], "type": "scatter"}, {"x": [0.0, 1.1111111111111112, 2.2222222222222223, 3.3333333333333335, 4.444444444444445, 5.555555555555555, 6.666666666666667, 7.777777777777779, 8.88888888888889, 10.0], "y": [0.0, 2.469135802469136, 9.876543209876544, 22.222222222222225, 39.50617283950618, 61.72839506172839, 88.8888888888889, 120.98765432098767, 158.0246913580247, 200.0], "type": "scatter"}], {}, {"linkText": "Export to plot.ly", "showLink": true})});</script></div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<div id="be2bb2b9-09ee-473a-9c09-81cdfdf8f9b8" style="height: 525px; width: 400px;" class="plotly-graph-div"></div><script type="text/javascript">require(["plotly"], function(Plotly) { window.PLOTLYENV=window.PLOTLYENV || {};window.PLOTLYENV.BASE_URL="https://plot.ly";Plotly.newPlot("be2bb2b9-09ee-473a-9c09-81cdfdf8f9b8", [{"x": [0.0, 1.1111111111111112, 2.2222222222222223, 3.3333333333333335, 4.444444444444445, 5.555555555555555, 6.666666666666667, 7.777777777777779, 8.88888888888889, 10.0], "y": [0.0, 1.234567901234568, 4.938271604938272, 11.111111111111112, 19.75308641975309, 30.864197530864196, 44.44444444444445, 60.49382716049384, 79.01234567901236, 100.0], "type": "scatter"}, {"x": [0.0, 1.1111111111111112, 2.2222222222222223, 3.3333333333333335, 4.444444444444445, 5.555555555555555, 6.666666666666667, 7.777777777777779, 8.88888888888889, 10.0], "y": [0.0, 2.469135802469136, 9.876543209876544, 22.222222222222225, 39.50617283950618, 61.72839506172839, 88.8888888888889, 120.98765432098767, 158.0246913580247, 200.0], "type": "scatter"}], {"width": 400}, {"linkText": "Export to plot.ly", "showLink": true})});</script></div>
</div>
<p>It should be noted that the implot package offers a direct wrapper to
useful plotly functions, which could also be accessed with plotly
directly. The Impact visualization module offers functions to help
extract useful data and generate traces.</p>
<div class="nbinput container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [30]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">impact.plotting</span> <span class="kn">import</span> <span class="n">time_profile_traces</span>

<span class="n">implot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time_profile_traces</span><span class="p">(</span><span class="n">replicate_trials</span><span class="o">=</span><span class="n">expt</span><span class="o">.</span><span class="n">replicate_trials</span><span class="p">,</span>
                               <span class="n">analyte</span><span class="o">=</span><span class="s1">&#39;ethanol&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast container">
<div class="container">
</div>
<div class="container">
<div id="a339f74b-ce03-4ed3-932b-f09122d03487" style="height: 525px; width: 100%;" class="plotly-graph-div"></div><script type="text/javascript">require(["plotly"], function(Plotly) { window.PLOTLYENV=window.PLOTLYENV || {};window.PLOTLYENV.BASE_URL="https://plot.ly";Plotly.newPlot("a339f74b-ce03-4ed3-932b-f09122d03487", [{"legendgroup": null, "error_y": {"color": "rgb(228,26,28)", "array": [0.0, 0.0, 0.0, 0.01759006581774512, 0.00871936334298372, 0.022915464467838976, 0.07563184277245959, 0.3711273289716035, 0.7412839401220788, 0.17366802002904683, 0.6117433991638952, 0.09426171901593323, 0.05665602699587767], "type": "data", "visible": true}, "x": [0.0, 3.0, 6.0, 9.0, 12.0, 15.0, 24.0, 24.1, 36.0, 48.0, 60.0, 72.0, 84.0], "marker": {"color": "rgb(228,26,28)"}, "type": "scatter", "line": {"color": "rgb(228,26,28)"}, "showlegend": true, "y": [0.0, 0.0, 0.0, 0.012438054821245267, 0.09493180291940456, 0.378576035928341, 4.469794174875654, 3.989181916049178, 6.439747028944755, 9.279630467591703, 10.15185487097027, 11.353725977896472, 12.048710322467286], "name": "None strain1 plasmid1 "}, {"legendgroup": null, "error_y": {"color": "rgb(55,126,184)", "array": [0.004680325474403282, 0.014366757274359092, 0.0013913905133873456, 0.026569398763139438, 0.15307879277561787, 0.38212801883609554, 0.43151215107078145, 0.9891039157658118, 1.438692883402948, 1.6251894008118177, 1.2093294468415405, 0.7758880166028469], "type": "data", "visible": true}, "x": [0.0, 3.0, 6.0, 9.0, 15.0, 24.0, 24.1, 36.0, 48.0, 60.0, 72.0, 84.0], "marker": {"color": "rgb(55,126,184)"}, "type": "scatter", "line": {"color": "rgb(55,126,184)"}, "showlegend": true, "y": [0.10368435778848928, 0.12777423501396445, 0.12572080035008257, 0.2327177178067815, 2.032239181984248, 4.388616997004181, 4.703900256352575, 6.402539575311688, 8.724294732093723, 10.300224241434828, 11.996834418506447, 12.544341139685358], "name": "None strain2 plasmid1 "}, {"legendgroup": null, "error_y": {"color": "rgb(77,175,74)", "array": [0.0, 0.0, 0.0, 0.009106788780224426, 0.002539664701816717, 0.02010553154721424, 0.13803233181172858, 0.13067936591096424, 0.20826600122337557, 0.020715605126510713, 0.237428077929155], "type": "data", "visible": true}, "x": [0.0, 3.0, 6.0, 9.0, 12.0, 15.0, 24.0, 24.1, 36.0, 48.0, 60.0], "marker": {"color": "rgb(77,175,74)"}, "type": "scatter", "line": {"color": "rgb(77,175,74)"}, "showlegend": true, "y": [0.0, 0.0, 0.0, 0.005257806953715635, 0.049373198995248814, 0.14108630785573203, 0.8911447127089952, 0.7846232103081276, 1.2110236560308416, 1.458190276123533, 1.6915154968023687], "name": "None strain3 plasmid1 "}, {"legendgroup": null, "error_y": {"color": "rgb(152,78,163)", "array": [0.0, 0.0, 0.0, 0.0020525310387137703, 0.01676881327656337, 0.015795558742459064, 0.12527142801153396, 0.20119514247634857, 0.16243897943492402, 0.2707096228602337], "type": "data", "visible": true}, "x": [0.0, 6.0, 9.0, 12.0, 15.0, 24.0, 24.1, 36.0, 48.0, 60.0], "marker": {"color": "rgb(152,78,163)"}, "type": "scatter", "line": {"color": "rgb(152,78,163)"}, "showlegend": true, "y": [0.0, 0.0, 0.0, 0.03062791025564899, 0.08623356714630151, 0.48170055934371964, 0.36221429861526633, 0.9396974151485583, 0.8698366772051302, 1.0848654000389786], "name": "None strain4 plasmid1 "}, {"legendgroup": null, "error_y": {"color": "rgb(255,127,0)", "array": [0.0, 0.0, 0.0006911421735325195, 0.002641849693118749, 0.0, 0.0002854572856910808, 0.01497044662715457, 0.012565426927654614, 0.01892995343351642, 0.03360280783145241, 0.005441812826431069], "type": "data", "visible": true}, "x": [0.0, 3.0, 6.0, 9.0, 12.0, 15.0, 24.0, 24.1, 36.0, 48.0, 60.0], "marker": {"color": "rgb(255,127,0)"}, "type": "scatter", "line": {"color": "rgb(255,127,0)"}, "showlegend": true, "y": [0.0, 0.0, 0.013157721294153242, 0.0018680698328798668, 0.0, 0.013257460201663396, 0.14239002077350188, 0.13536935830699462, 0.1869849462989518, 0.1837553264096538, 0.19057088493116778], "name": "None strain3 plasmid3 "}, {"legendgroup": null, "error_y": {"color": "rgb(255,255,51)", "array": [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0653137702803532, 0.035261637786012066, 0.09029788340222862, 0.1055980296389689, 0.15191476992707262], "type": "data", "visible": true}, "x": [0.0, 3.0, 6.0, 9.0, 12.0, 15.0, 24.0, 24.1, 36.0, 48.0, 60.0], "marker": {"color": "rgb(255,255,51)"}, "type": "scatter", "line": {"color": "rgb(255,255,51)"}, "showlegend": true, "y": [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.15295651563931154, 0.10450207365377456, 0.20895822197617767, 0.28195490116395916, 0.35397344869548447], "name": "None strain4 plasmid3 "}, {"legendgroup": null, "error_y": {"color": "rgb(166,86,40)", "array": [0.02968128314440146, 0.0014816645740292162, 0.02111511037904726, 0.09622465804827773, 0.4569993760195169, 0.26163542928724276, 0.5676593970534616, 1.4541619384318882, 2.1851247946305623, 2.6420134795873382, 1.9803191183140414, 0.828043155694391], "type": "data", "visible": true}, "x": [0.0, 3.0, 6.0, 9.0, 15.0, 24.0, 24.1, 36.0, 48.0, 60.0, 72.0, 84.0], "marker": {"color": "rgb(166,86,40)"}, "type": "scatter", "line": {"color": "rgb(166,86,40)"}, "showlegend": true, "y": [0.20717116730345783, 0.23689644905501736, 0.34144020993071705, 1.4824730382216043, 7.092117182679561, 7.883006804939328, 8.120505850537533, 12.975079584750242, 16.971890417720573, 18.77735663067879, 18.680129807896762, 17.961650568970086], "name": "None strain2 plasmid2 "}], {}, {"linkText": "Export to plot.ly", "showLink": true})});</script></div>
</div>
<div class="nbinput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [ ]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>

<span></span><span class="c1"># Grab the average data</span>
<span class="n">rep_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">rep</span> <span class="k">for</span> <span class="n">rep</span> <span class="ow">in</span> <span class="n">expt</span><span class="o">.</span><span class="n">replicate_trial_dict</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>

<span class="n">etoh_datas</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">rep</span> <span class="ow">in</span> <span class="n">rep_list</span><span class="p">:</span>
    <span class="n">etoh_datas</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;avg&#39;</span><span class="p">:</span> <span class="n">rep</span><span class="o">.</span><span class="n">avg</span><span class="o">.</span><span class="n">analyte_dict</span><span class="p">[</span><span class="s1">&#39;ethanol&#39;</span><span class="p">],</span>
                      <span class="s1">&#39;std&#39;</span><span class="p">:</span> <span class="n">rep</span><span class="o">.</span><span class="n">std</span><span class="o">.</span><span class="n">analyte_dict</span><span class="p">[</span><span class="s1">&#39;ethanol&#39;</span><span class="p">]})</span>
    <span class="k">for</span> <span class="n">rep_id</span> <span class="ow">in</span> <span class="n">rep</span><span class="o">.</span><span class="n">single_trial_dict</span><span class="p">:</span>
        <span class="n">etoh_datas</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">rep_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">rep</span><span class="o">.</span><span class="n">single_trial_dict</span><span class="p">[</span><span class="n">rep_id</span><span class="p">]</span><span class="o">.</span><span class="n">analyte_dict</span><span class="p">[</span><span class="s1">&#39;ethanol&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">etoh_data</span> <span class="ow">in</span> <span class="n">etoh_datas</span><span class="p">:</span>
    <span class="n">layout</span> <span class="o">=</span> <span class="n">implot</span><span class="o">.</span><span class="n">go</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">etoh_data</span><span class="p">[</span><span class="s1">&#39;avg&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">trial_identifier</span><span class="p">))</span>
    <span class="n">implot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">implot</span><span class="o">.</span><span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="n">implot</span><span class="o">.</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">etoh_data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">time_vector</span><span class="p">,</span>
                                   <span class="n">y</span><span class="o">=</span><span class="n">etoh_data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">data_vector</span><span class="p">,</span>
                                  <span class="n">name</span><span class="o">=</span><span class="n">key</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">etoh_data</span><span class="p">)],</span><span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">))</span>

<span class="c1"># implot.plot([implot.go.Scatter(x=etoh_data.time_vector, y=etoh_data.data_vector) for etoh_data in etoh_datas])</span>

<span class="k">print</span><span class="p">(</span><span class="n">etoh_data</span><span class="p">)</span>
<span class="c1"># and the data for each replicate</span>
<span class="c1"># for rep_id in rep.</span>
<span class="c1"># for analyte_data in etoh_data[&#39;avg&#39;]:</span>
<span class="c1">#     print(analyte_data.trial_identifier)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [ ]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">impact.plotting</span>
<span class="kn">import</span> <span class="nn">plotly.graph_objs</span> <span class="kn">as</span> <span class="nn">go</span>
<span class="kn">from</span> <span class="nn">plotly.offline</span> <span class="kn">import</span> <span class="n">iplot</span>

<span class="n">iplot</span><span class="p">(</span>
    <span class="p">[</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="n">analyte_data_avg</span><span class="o">.</span><span class="n">time_vector</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="n">analyte_data_avg</span><span class="o">.</span><span class="n">data_vector</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">analyte_data</span><span class="p">),</span>
            <span class="n">error_y</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">array</span><span class="o">=</span><span class="n">analyte_data_std</span><span class="o">.</span><span class="n">data_vector</span><span class="p">)</span>
               <span class="p">)</span>
     <span class="k">for</span> <span class="n">analyte_data_avg</span><span class="p">,</span> <span class="n">analyte_data_std</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">ethanol_avg_data</span><span class="p">,</span> <span class="n">ethanol_std_data</span><span class="p">)]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Exploring-features">
<h2>Exploring features<a class="headerlink" href="#Exploring-features" title="Permalink to this headline">¶</a></h2>
<p>With a standard schema for the data, we can now begin to explore some of
the features which have been generated. Features include things like:</p>
<ul class="simple">
<li>rate (<span class="math">\(g\ \ h^{-1}\)</span>)</li>
<li>yield (<span class="math">\(g_{product}\ \ g_{substrate}^{-1}\)</span>)</li>
<li>specific productivity (<span class="math">\(g\ \ gdw^{-1}\ \ h^{-1}\)</span>)</li>
<li>normalized data (e.g. <span class="math">\(a.u. fluorescence\ \ OD_{600}^{-1}\)</span>)</li>
</ul>
<div class="nbinput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [ ]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">ethanol_avg_specific_productivity</span> <span class="o">=</span> <span class="p">[</span><span class="n">expt</span><span class="o">.</span><span class="n">replicate_experiment_dict</span><span class="p">[</span><span class="n">replicate_key</span><span class="p">]</span><span class="o">.</span><span class="n">avg</span><span class="o">.</span><span class="n">analyte_dict</span><span class="p">[</span><span class="s1">&#39;ethanol&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">specific_productivity</span> <span class="k">for</span> <span class="n">replicate_key</span> <span class="ow">in</span> <span class="n">expt</span><span class="o">.</span><span class="n">replicate_experiment_dict</span><span class="p">]</span>
<span class="c1"># ethanol_std_specific_productivity = [expt.replicate_experiment_dict[replicate_key].std.analyte_dict[&#39;ethanol&#39;].specific_productivity for replicate_key in expt.replicate_experiment_dict]</span>

<span class="n">iplot</span><span class="p">(</span>
    <span class="p">[</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="n">analyte_data_avg</span><span class="o">.</span><span class="n">time_vector</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="n">analyte_data_avg</span><span class="o">.</span><span class="n">specific_productivity</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">analyte_data</span><span class="p">),</span>
<span class="c1">#             error_y=dict(type=&#39;data&#39;, array=analyte_data_std.product_yield)</span>
               <span class="p">)</span>
     <span class="k">for</span> <span class="n">analyte_data_avg</span><span class="p">,</span> <span class="n">analyte_data_std</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">ethanol_avg_data</span><span class="p">,</span> <span class="n">ethanol_std_data</span><span class="p">)]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>Or maybe just the endpoints..</p>
<div class="nbinput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [ ]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">ethanol_avg_data</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">ethanol_avg_data</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">pd_series</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

<span class="n">iplot</span><span class="p">(</span>
    <span class="p">[</span><span class="n">go</span><span class="o">.</span><span class="n">Bar</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">analyte_data_avg</span><span class="p">)</span> <span class="k">for</span> <span class="n">analyte_data_avg</span> <span class="ow">in</span> <span class="n">ethanol_avg_data</span><span class="p">],</span>
            <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="n">analyte_data_avg</span><span class="o">.</span><span class="n">pd_series</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">analyte_data_avg</span> <span class="ow">in</span> <span class="n">ethanol_avg_data</span><span class="p">],</span>
            <span class="n">name</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">analyte_data</span><span class="p">),</span>
<span class="c1">#             error_y=dict(type=&#39;data&#39;, array=analyte_data_std.product_yield)</span>
               <span class="p">)]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast container">
<div class="highlight-none"><div class="highlight"><pre>
<span></span>In [ ]:
</pre></div>
</div>
<div class="highlight-ipython3"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2016, Naveen Venayak.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>